angular.module("TNotify",[]).directive("tNotify",function(){return{restrict:"E",replace:true,scope:true,template:'<div class="tnotify-overlay">'+'<div class="tnotify">'+'<div class="tnotify-inner" ng-class="{remind: type === \'remind\'}">'+'<div class="tnotify-title" ng-if="title">{{ title }}</div>'+'<div class="tnotify-text" ng-if="text">{{ text }}</div>'+'<input type="{{ inputType }}" placeholder="{{ inputPlaceHolder }}" class="tnotify-text-input" ng-if="type === \'prompt\'" ng-model="form.input">'+"</div>"+'<div class="tnotify-buttons" ng-if="type !== \'remind\'">'+'<span class="tnotify-button" ng-if="type !== \'alert\'" ng-click="onCancel()">{{ cancelText }}</span>'+'<span class="tnotify-button tnotify-button-bold" ng-click="onOk(input)">{{ okText }}</span>'+"</div>"+"</div>"+"</div>"}}).factory("TRANSITION_END_NAME",["$window",function(t){var n=["Moz","webkit","ms","O"];var e={Moz:"transitionend",webkit:"webkitTransitionEnd",ms:"MSTransitionEnd",O:"oTransitionEnd"};var i={Moz:"animationend",webkit:"webkitAnimationEnd",ms:"MSAnimationEnd",O:"oAnimationEnd"};var o,r,a;var l=t.document.createElement("div");for(var f=0,s=n.length;f<s;f++){o=n[f];if(o+"Transition"in l.style){break}o=false}if(o){r=e[o];a=i[o]}return r}]).provider("TNotify",function(){var t={title:null,text:null,form:{input:""},inputType:"text",inputPlaceHolder:"",cancelText:"取消",okText:"确定"};var n=["title","text","cancelText","okText","inputType","inputPlaceHolder"];this.set=function(e,i){var o=this;if(angular.isObject(e)){for(var r in e){o.set(r,e[r])}}else{if(e&&n.indexOf(e)>-1){if(i){t[e]=i}}}};this.$get=["$rootScope","$compile","$animate","$q","$document","$timeout","TRANSITION_END_NAME",function(n,e,i,o,r,a,l){function f(f){var s=o.defer();var u=n.$new(true);angular.extend(u,t,f);u.onCancel=function(){if(u.type==="confirm"){s.resolve(false)}else if(u.type==="prompt"){s.resolve(null);u.form.input=""}u.$destroy()};u.onOk=function(){if(u.type==="prompt"){s.resolve(u.form.input||"");u.form.input=""}else{s.resolve(true)}u.$destroy()};var c=e("<t-notify></t-notify>")(u);if(u.type!=="remind"){i.enter(c,angular.element(r[0].body),angular.element(r[0].body.lastChild)).then(function(){c.addClass("tnotify-animate tnotify-in");u.$on("$destroy",function(){c.on(l,function(){c.off(l).remove()});c.addClass("tnotify-out")})})}else{i.enter(c,angular.element(r[0].body),angular.element(r[0].body.lastChild)).then(function(){var t;c.on(l,function(){if(t==="out"){c.off(l).remove();s.resolve()}else if(t==="in"){a(function(){t="out";c.addClass("tnotify-out")},150)}});t="in";c.addClass("tnotify-animate tnotify-in")})}return s.promise}function s(t){if(angular.isString(t)){return{text:t}}else if(angular.isObject(t)){return t}else{throw new Error("expect a string or a object");return{}}}function u(t){t=s(t);t.type="alert";return f(t)}function c(t){t=s(t);t.type="confirm";return f(t)}function d(t){t=s(t);t.type="prompt";return f(t)}function p(t){t=s(t);t.type="remind";return f(t)}return{alert:u,confirm:c,prompt:d,remind:p}}]});